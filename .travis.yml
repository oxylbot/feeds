sudo: required

services:
 - docker

language: rust
rust: nightly

before_script:
  - sudo apt-get install -y build-essential
  - sudo apt-get update
  - cargo build 

script:
  - cargo test

after_success:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker pull oxyl/feeds
  - docker build .
  - docker push oxyl/feeds